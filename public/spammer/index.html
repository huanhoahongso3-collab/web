<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5021008750553828"
     crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!DOCTYPE html>
<meta property="og:site_name" content="thisistrueuser">
<meta property="og:type" content="website">
<meta property="og:title" content="Spammer" />
<meta property="og:description" content="Electric Boogaloo: You click and everybody counts." />
<meta property="og:url" content="https://trueuser.tk/" />
<meta property="og:image" content="https://trueuser.tk/truef.png" />
<meta name="theme-color" content="#2f3136">
<link rel="icon" id="icon" href="/truef.png">
<div>
<div class="topnav">
  <a href="/" title="For all things trueuser">â€¹ Home</a>
    <a class="active">Spammer</a><div class="xt-ct-menu" height="20" width="20">
    <div class="xtlab-ctmenu-item" id="tog"><img src="/link.png" height="20" width="20"/></div>
    
</div>
    <div class="xtlab-ctmenu-sub" id="this" style="display: flex; postion: absolute; overflow: auto; width: auto; white-space: nowrap">
        <div style="margin-left: auto">
        <a href="https://www.reddit.com/user/realPacManVN"><img src="/reddit.svg" height="20" width="20"/></a>
        <a href="https://youtube.com/thisistrueuser"><img src="/youtube.svg" height="20" width="20"/></a>
        <a href="https://twitter.com/trueuser_"><img src="/twitter.svg" height="20" width="20"/></a>
        <a href="https://roblox.com/groups/8911797/trueusers-room#!/"><img src="/roblox.png" height="20" width="20"/></a>
        <a href="/discord"><img src="/disc.png" height="20" width="20"/></a>
        <a href="https://ko-fi.com/trueuser"><img src="/kofi.png" height="20" width="20"/></a>
        </div>
    </div>
</div>
</div>

<html>
<link rel="stylesheet" href="./style.css">
<style>
    #throttle {
      display: none;
    }
</style>
<title>Spammer - thisistrueuser</title>
<p>

<script>

    $( "#tog" ).click(function() {
  $( "#this" ).toggle("slide");
});
    let man = document.cookie;
if (man.includes("null_medal=true")) {document.getElementById("icon").href = "/trueg.png";}
</script>
<script>
let isActive = true; // Indicates if the page is currently focused
let intervalId; // Stores the interval ID
let clickCount = 0; // Local click count
let lastClickTime = 0; // Timestamp of the last click
let isThrottled = false; // Indicates if a request is currently throttled
let allowed = true;
let totalThrottle = 0;
let dethrottledClickCount = 0
    
function updateClickButton() {
  document.getElementById('clickButton').innerHTML = clickCount;
}
 let throttledClickCount = 0; // Local click count during throttling

    function updateThrottleCount() {
        
      const throttleElement = $('#throttle');
      const throttleElement2 = $('#throttle2');
        dethrottledClickCount = totalThrottle - throttledClickCount
        throttleElement.text("Pending: " + totalThrottle + "/7")
        throttleElement2.text("Sent: " + dethrottledClickCount + "/" + totalThrottle)
      if (throttledClickCount > 0) {
          throttleElement2.slideDown();
        throttleElement.slideDown();
      } else {
        throttleElement.slideUp();
          throttleElement2.slideUp()
      }
    }

 async function send() {
document.getElementById('clickButton').style = "font-family: Varela; color: white";
 if (isThrottled) {
if (totalThrottle < 6 && allowed) {
  throttledClickCount++;
    totalThrottle++
} else {
     if (totalThrottle < 8 && allowed) {
    throttledClickCount++;
    totalThrottle++
     allowed = false
     }
}
   updateThrottleCount();
   return;
 }

  clickCount++;
  updateClickButton();
  lastClickTime = Date.now();

  // Make a GET request 3 seconds after the last click
  clearTimeout(intervalId);
  intervalId = setTimeout(fetchAndUpdateClickButton, 3000);

  // Throttle subsequent requests if a request is already in progress
  if (isThrottled) {
    return;
  }

  // Make a POST request to your API endpoint
  try {
    isThrottled = true; // Set throttling flag
    const response = await fetch('https://api.trueuser0.repl.co/click', {
      method: 'POST',
    });
    const data = await response.json();
    console.log(data);

    // Check if there are pending clicks during throttling
    if (throttledClickCount > 0) {
      // Send additional post requests until throttled click count reaches 0
      while (throttledClickCount > 0) {
        await fetch('https://api.trueuser0.repl.co/click'', {
          method: 'POST',
        });
        throttledClickCount--;
        clickCount++;
          updateClickButton()
        updateThrottleCount()
      }
    }
  } catch (error) {
    console.error(error);
  } finally {
    isThrottled = false; // Reset throttling flag
    allowed = true
    totalThrottle = 0
  }
     document.getElementById('clickButton').style = "font-family: Varela";
}

async function fetchAndUpdateClickButton() {
  try {
    // Make a GET request to your API endpoint
    const response = await fetch('https://api.trueuser0.repl.co/click'');
    const data = await response.json();
    const fetchedCount = data.num;

    // Update the click count regardless of the fetched count
    clickCount = fetchedCount;
    updateClickButton();
  } catch (error) {
    console.error(error);
  }
}



function handleVisibilityChange() {
  if (document.hidden) {
    clearInterval(intervalId);
    isActive = false;
  } else {
    isActive = true;
    fetchAndUpdateClickButton(); // Update immediately when page becomes active

    // Make a GET request 3 seconds after the last click
    const timeSinceLastClick = Date.now() - lastClickTime;
    const delay = Math.max(0, 3000 - timeSinceLastClick);
    clearTimeout(intervalId);
    intervalId = setTimeout(fetchAndUpdateClickButton, delay);
  }
}

// Check if the page is currently focused or not
document.addEventListener('visibilitychange', handleVisibilityChange);

// Initial data retrieval
fetchAndUpdateClickButton();

(function animate() {
  if (isActive) {
    const timeSinceLastClick = Date.now() - lastClickTime;
    const delay = Math.max(0, 3000 - timeSinceLastClick);
    
    if (delay === 0) {
      fetchAndUpdateClickButton();
      if (!isThrottled) {
      lastClickTime = Date.now();
      }
    }
  }
  
  requestAnimationFrame(animate);
})();




// Clean up resources when the page is unloaded or closed
window.addEventListener('beforeunload', () => {
  clearInterval(intervalId);
});

</script>

<p2 style="font-family:Varela" id="demo"><button id="clickButton" onclick="send()" class="button" style="font-family: Varela">?</button></p2><p style="font-family:Varela; margin-top: 55px; font-size: 13px; z-index: -1" id="throttle"/><p style="font-family:Varela; margin-top: 75px; font-size: 13px; z-index: -1" id="throttle2"/>

</p>
</html>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-PN9F3D1WT1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PN9F3D1WT1');
</script>